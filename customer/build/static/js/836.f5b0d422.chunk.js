"use strict";(self.webpackChunkfireworks_customer=self.webpackChunkfireworks_customer||[]).push([[836],{2455:(t,e,o)=>{o.r(e),o.d(e,{downloadPdfInvoice:()=>s});var n=o(7762),a=o(557),i=o.n(a),r=o(7484);function l(t){return"Rs. "+Number(t||0).toLocaleString("en-IN",{minimumFractionDigits:2})}async function s(t){try{var e,o,a,s,c;const d=new n.default({unit:"pt",format:"a4"}),u=40;let h=40;d.setFont("helvetica","bold"),d.setFontSize(18),d.text("Diwali Fireworks Invoice",u,h),h+=25,d.setFont("helvetica","normal"),d.setFontSize(11),d.text("Order ID: ".concat(t.orderId),u,h),d.text("Date: ".concat(t.createdAt||(new Date).toLocaleString()),u+300,h),h+=25,d.setFontSize(12),d.setFont("helvetica","bold"),d.text("Customer Details:",u,h),d.setFont("helvetica","normal"),d.setFontSize(11),h+=15,d.text("Name: ".concat((null===(e=t.customer)||void 0===e?void 0:e.name)||""),u,h),h+=15,d.text("Phone: ".concat((null===(o=t.customer)||void 0===o?void 0:o.phone)||""),u,h),h+=15,d.text("WhatsApp: ".concat((null===(a=t.customer)||void 0===a?void 0:a.whatsapp)||""),u,h),h+=15,d.text("Address: ".concat((null===(s=t.customer)||void 0===s?void 0:s.address)||""),u,h);const m=(t.items||[]).map(t=>[t.item+(t.subItem?" \u2014 ".concat(t.subItem):""),String(t.qty),l(t.price),l((t.qty||0)*(t.price||0))]);i()(d,{startY:h+20,head:[["Item","Qty","Unit Price","Total"]],body:m,theme:"striped",styles:{font:"helvetica",fontSize:10,halign:"center"},headStyles:{fillColor:[25,118,210],textColor:255,fontStyle:"bold"},columnStyles:{0:{halign:"left"},1:{halign:"center"},2:{halign:"right"},3:{halign:"right"}}});const p=(null===(c=d.lastAutoTable)||void 0===c?void 0:c.finalY)||h+40;d.setFontSize(13),d.setFont("helvetica","bold"),d.setTextColor(200,0,0),d.text("Grand Total: ".concat(l(t.subtotal||0)),u,p+30),d.setFontSize(11),d.setFont("helvetica","italic"),d.setTextColor(80,80,80),d.text("Thank you for shopping with Diwali Fireworks!",u,p+60),d.setTextColor(0,0,150),d.setFont("helvetica","normal"),d.text("Contact us for any queries:",u,p+85),d.setTextColor(0,102,0),d.textWithLink("WhatsApp: 9494496494",u,p+105,{url:"https://wa.me/919494496494"}),d.textWithLink("WhatsApp: 6302400271",u,p+125,{url:"https://wa.me/916302400271"}),d.save("invoice-".concat(t.orderId,".pdf"));const v=d.output("arraybuffer"),f=btoa(new Uint8Array(v).reduce((t,e)=>t+String.fromCharCode(e),""));await fetch(r.H$,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"payload="+encodeURIComponent(JSON.stringify({action:"uploadInvoice",orderId:t.orderId,fileBase64:f}))})}catch(d){console.error("PDF generation/upload error:",d),alert("\u26a0\ufe0f Could not generate/upload PDF invoice.")}}}}]);
//# sourceMappingURL=836.f5b0d422.chunk.js.map